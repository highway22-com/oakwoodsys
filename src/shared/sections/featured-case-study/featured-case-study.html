<section class="w-full bg-white px-30 py-40 overflow-visible" aria-labelledby="featured-case-study-title">
  <div class="overflow-visible">
    @if (currentSection(); as section) {
    <div class="grid grid-cols-1 lg:grid-cols-[1fr_auto_1fr] overflow-visible">
      <div class="w-full aspect-4/3 overflow-hidden lg:pr-25" [@slideDown]="animationKey()">
        <img [src]="section.image?.url ?? ''"
          [alt]="section.image?.alt ?? (section.title + ' - Featured case study image')"
          class="w-full h-full object-cover" loading="lazy" />
      </div>
      <div class=" flex justify-center flex-col w-2 h-full">
        <button type="button"
          class="w-2 h-full cursor-pointer transition-colors duration-300 ease-in-out hover:opacity-90"
          [ngClass]="selectedIndex() === 0 ? 'bg-p-700' : 'bg-p-100'" (click)="selectCaseStudy(0)"
          [attr.aria-label]="'Case study 1'" [attr.aria-pressed]="selectedIndex() === 0"></button>
        <button type="button"
          class="w-2 h-full cursor-pointer transition-colors duration-300 ease-in-out hover:opacity-90"
          [ngClass]="selectedIndex() === 1 ? 'bg-p-700' : 'bg-p-100'" (click)="selectCaseStudy(1)"
          [attr.aria-label]="'Case study 2'" [attr.aria-pressed]="selectedIndex() === 1"></button>
      </div>
      <div class="order-1 lg:order-2 relative lg:pl-28 overflow-visible">
        <div class="pt-10 overflow-visible" [attr.data-selected-index]="selectedIndex()" [@slideDown]="animationKey()">
          <p class="text-lg font-semibold uppercase tracking-wide text-p-600 pb-24">
            {{ section.label }}
          </p>
          <span
            class="inline-block text-xs sm:text-sm font-medium text-p-600/85 bg-blue-50 px-3 py-1.5 sm:px-4 sm:py-2  mb-5 sm:mb-6">
            {{ section.tag }}
          </span>
          <h2 id="featured-case-study-title"
            class="text-2xl sm:text-3xl md:text-4xl lg:text-5xl font-light text-gray-950 leading-tight pb-2">
            {{ titleText }}
          </h2>
          <div class="text-sm sm:text-lg text-gray-500 mb-6 sm:mb-8 leading-relaxed font-segoe prose prose-p:mb-2"
            [innerHTML]="section.description ?? ''"></div>
          <div class="flex flex-col sm:flex-row gap-4 sm:gap-6 items-start sm:items-center pt-16">
            @if (section.cta?.primary?.link) {
            <a [routerLink]="section.cta?.primary?.link ?? ''"
              class="group  text-white font-normal  transition-all duration-200  whitespace-nowrap shadow-none bg-p-700 ">
              <span class="flex justify-center items-center py-4 px-8 ">
                <div class="flex items-center transition-all duration-200 group-hover:-translate-x-2 pl-5">{{
                  section.cta?.primary?.text ?? '' }}</div>
                <div class="flex flex-1 ">
                  <svg
                    class="transition-all duration-200 -translate-x-2 opacity-0 group-hover:translate-x-0 group-hover:opacity-100 "
                    width="14" height="13" viewBox="0 0 14 13" fill="none" xmlns="http://www.w3.org/2000/svg"
                    aria-hidden="true">
                    <path
                      d="M8.25 0.28125L13.75 5.53125C13.9062 5.6875 14 5.875 14 6.09375C14 6.28125 13.9062 6.46875 13.75 6.625L8.25 11.875C7.96875 12.1562 7.46875 12.1562 7.1875 11.8438C6.90625 11.5625 6.90625 11.0625 7.21875 10.7812L11.375 6.84375H0.75C0.3125 6.84375 0 6.5 0 6.09375C0 5.65625 0.3125 5.34375 0.75 5.34375H11.375L7.21875 1.375C6.90625 1.09375 6.90625 0.59375 7.1875 0.3125C7.46875 0 7.9375 0 8.25 0.28125Z"
                      fill="currentColor" />
                  </svg>
                </div>
              </span>
            </a>
            } @else if (section.cta?.primary) {

            <button type="button"
              class="group  text-white font-normal  transition-all duration-200  whitespace-nowrap shadow-none bg-p-700 ">
              <span class="flex justify-center items-center py-4 px-8 ">
                <div class="flex items-center transition-all duration-200 group-hover:-translate-x-2 pl-5">{{
                  section.cta?.primary?.text ?? '' }}</div>
                <div class="flex flex-1 ">
                  <svg
                    class="transition-all duration-200 -translate-x-2 opacity-0 group-hover:translate-x-0 group-hover:opacity-100 "
                    width="14" height="13" viewBox="0 0 14 13" fill="none" xmlns="http://www.w3.org/2000/svg"
                    aria-hidden="true">
                    <path
                      d="M8.25 0.28125L13.75 5.53125C13.9062 5.6875 14 5.875 14 6.09375C14 6.28125 13.9062 6.46875 13.75 6.625L8.25 11.875C7.96875 12.1562 7.46875 12.1562 7.1875 11.8438C6.90625 11.5625 6.90625 11.0625 7.21875 10.7812L11.375 6.84375H0.75C0.3125 6.84375 0 6.5 0 6.09375C0 5.65625 0.3125 5.34375 0.75 5.34375H11.375L7.21875 1.375C6.90625 1.09375 6.90625 0.59375 7.1875 0.3125C7.46875 0 7.9375 0 8.25 0.28125Z"
                      fill="currentColor" />
                  </svg>
                </div>
              </span>
            </button>
            }
            @if (section.cta?.secondary) {
            <a [routerLink]="section.cta?.secondary?.link ?? '/resources/case-studies'"
              class=" sm:text-lg md:text-base  text-gray-700  hover:text-p-500 transition-colors duration-200 inline-flex items-center gap-1 font-segoe">
              {{ section.cta?.secondary?.text ?? '' }}
              <i class="fa-solid fa-chevron-right text-sm pl-2" aria-hidden="true"></i>
            </a>
            }
          </div>
        </div>
      </div>
    </div>
    }
  </div>
</section>