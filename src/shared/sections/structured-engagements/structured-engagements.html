<section class="w-full bg-gradient-to-b from-slate-900 via-blue-900 to-slate-900 min-h-screen overflow-x-hidden relative"
  aria-labelledby="structured-engagements-title">
  
  <!-- Background image with opacity -->
  <div class="absolute inset-0 bg-cover bg-center bg-no-repeat opacity-30" 
    style="background-image: url('/assets/structured-engagement-bg.jpg');"></div>

  <div class="px-4 sm:px-6 md:px-8 lg:px-18 relative z-10 py-12">
    <div class="text-center mb-8 sm:mb-10 md:mb-12">
      <p class="text-base       uppercase tracking-wider text-p-200 pb-4">
        {{ section().label }}
      </p>
      <h2 id="structured-engagements-title"
        class="text-xl sm:text-4xl md:text-5xl lg:text-5xl  text-white mb-6 sm:mb-8 md:mb-10">
        {{ getTitle(section()) }}
      </h2>
      @if (section().tabs?.length) {
      <div #tabList class="structured-tabs flex w-full justify-start lg:justify-center gap-4 sm:gap-6 mb-8 sm:mb-10 md:mb-12 overflow-x-auto whitespace-nowrap pb-2">
        @for (tab of section().tabs; track tab) {
        <button #tabButton type="button" class="structured-tabs__button"
          [attr.data-tab]="tab"
          [ngClass]="getTabClasses(tab, activeTab() ?? undefined) + ' text-base sm:text-lg text-p-200 shrink-0'"
          (click)="onTabClick(tab)">
          {{ tab }}
        </button>
        }
        <div class="structured-tabs__underline"
          [style.left.px]="underlineLeft()"
          [style.width.px]="underlineWidth()"
          [style.opacity]="underlineVisible() ? 1 : 0"></div>
      </div>
      }
    </div>
    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 sm:gap-8 mb-8 sm:mb-10"
      [@tabContent]="animationKey()">
      @for (offer of filteredOffers(); track offer.id || $index) {
      <div
        class="structured-engagements__card group cursor-pointer rounded-md pl-[1.01px] pt-[2px] structured-engagements__card-border"
        [attr.data-border]="normalizeBorderColor(offer.borderColor)"
        [style.background]="getOfferBorderGradient(offer.borderColor, $index)"
        [ngClass]="getOfferCardClasses(offer.borderColor, $index)">
        <div
          class="relative h-full p-6 sm:p-8 flex flex-col"
          [style.background]="'rgba(16, 25, 43, 0.7)'">
          <div class="flex w-[55px] h-[55px]       text-3xl items-center justify-center"
            [ngClass]="getOfferIconBgClass(offer.borderColor)">
            @if (offer.svgIcon) {
              <div [innerHTML]="offer.svgIcon"></div>
            } @else {
              <i [class]="'fa-solid fa-' + (offer.icon || 'circle-nodes') + ' ' + getIconColor(offer.borderColor)"></i>
            }
          </div>
          <h3 class="text-xl  text-white/90 pt-10 pb-4">
            {{ offer.title }}
          </h3>
          <p class="text-[15px] text-gray-300 mb-3 font-segoe pb-2" style="line-height: 140%;">
            {{ offer.description }}
          </p>
          @if (offer.link) {
          <a [href]="offer.link"
            class="text-sm sm:text-base text-gray-300 hover:text-white transition-colors duration-200 inline-flex items-center">
            {{ offer.linkText ?? 'Learn more' }} <span class="ml-1">></span>
          </a>
          }
        </div>
      </div>

      @if ($index === 0 && section().cta) {
      <div class="lg:col-start-1 lg:row-start-2">
        <div class="bg-p-700 inline-block mb-3">
          <app-button-primary [text]="section().cta?.text ?? ''" [link]="section().cta?.link ?? '/structured-engagement'" />
        </div>
      </div>
      }
      }
    </div>
  </div>
</section>