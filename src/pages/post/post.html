@if (post(); as p) {
<!-- Post Content (datos cargados) -->
<article class="min-h-screen px-1 sm:px-0">
  <!-- Hero Section -->
  <section
    class="relative w-full min-h-[82vh] bg-gradient-to-br from-blue-900 via-blue-800 to-slate-900 flex items-center">
    @if (p.featuredImage?.node?.sourceUrl) {
    <img [src]="p.featuredImage!.node!.sourceUrl" [alt]="p.featuredImage!.node!.altText || p.title"
      class="absolute inset-0 w-full h-full object-cover" />
    }
    <div class="absolute inset-0 bg-slate-900/70"></div>

    <div class="relative z-10 px-1 sm:px-6 md:px-8 lg:px-28 py-16 sm:py-20 self-end">
      <div class="max-w-4xl ">
        <nav class="mb-6" aria-label="Breadcrumb">
          <ol class="flex items-center space-x-2 text-sm text-white/80">
            @for (crumb of getBreadcrumbs(); track crumb.label + (crumb.link ?? ''); let last = $last) {
            @if (!last) {
            <li class="font-segoe">
              @if (crumb.link) {
              <a [routerLink]="crumb.link" class="hover:text-white transition-colors">{{ crumb.label }}</a>
              } @else {
              <span>{{ crumb.label }}</span>
              }
            </li>
            <li><span class="mx-2">/</span></li>
            } @else {
            <li class="text-white">{{ crumb.label }}</li>
            }
            }
          </ol>
        </nav>

        <h1 class="text-2xl sm:text-4xl md:text-5xl lg:text-[4rem] text-white leading-tight">
          {{ p.title }}
        </h1>

        <div class="flex flex-col py-6">
          <div
            class="flex flex-col sm:flex-row flex-wrap items-center gap-4 sm:gap-6 text-white/90 text-sm sm:text-base">
            @if (p.authorPerson || p.author.node) {
            <div class="flex items-center gap-3 ">
              <div class="tag-badge-transparent">
                {{ decodeHtmlEntities(p.primaryTag ?? '') }}
              </div>
              @if (p.author.node.firstName === 'Oakwood') {
              <img src="/assets/oawPerson.png" [alt]="authorDisplayName(p)"
                class="w-10 h-10      object-cover flex-shrink-0" />
              }
              @else if (p.authorPerson?.picture) {
              <img [src]="p.authorPerson!.picture!" [alt]="authorDisplayName(p)"
                class="w-10 h-10      object-cover flex-shrink-0" />
              } @else {
              <div class="w-10 h-10 bg-white/20      flex items-center justify-center">
                <span class="text-white      ">
                  {{ (p.authorPerson?.name || p.authorPerson?.firstName || p.author.node.firstName || 'A').charAt(0) }}
                </span>
              </div>
              }
              <div class="flex flex-col">
                <p class="text-xs sm:text-sm">{{ authorDisplayName(p) }}</p>
                @if (p.date) {
                <div class="flex items-center gap-2">
                  <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                      d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z" />
                  </svg>
                  <span class="text-xs sm:text-sm">{{ p.date | date:'d MMM, yyyy' }}</span>
                  <span class="mx-0.5">•</span>
                  <span class="text-xs sm:text-sm">{{ readingTimeMinutes(p.content) }} min read</span>
                </div>
                }
              </div>
            </div>
            }

          </div>
          <div class="py-6">
            <div class="flex items-center gap-3 ml-auto">
              <label for="share" class="text-xs sm:text-sm text-white/80">Share</label>
              <a [href]="getFacebookShareUrl()" target="_blank" rel="noopener noreferrer"
                class="w-8 h-8 flex items-center justify-center text-white/80 hover:text-white transition-colors"
                aria-label="Share on Facebook">
                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24">
                  <path
                    d="M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z" />
                </svg>
              </a>
              <a [href]="getTwitterShareUrl()" target="_blank" rel="noopener noreferrer"
                class="w-8 h-8 flex items-center justify-center text-white/80 hover:text-white transition-colors"
                aria-label="Share on Twitter">
                <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24">
                  <path
                    d="M17.1761 4.24219H19.9362L13.9061 11.0196L21 20.2422H15.4456L11.0951 14.6488L6.11723 20.2422H3.35544L9.80517 12.993L3 4.24219H8.69545L12.6279 9.35481L17.1761 4.24219ZM16.2073 18.6176H17.7368L7.86441 5.78147H6.2232L16.2073 18.6176Z" />
                </svg>

              </a>
              <a [href]="getLinkedInShareUrl()" target="_blank" rel="noopener noreferrer"
                class="w-8 h-8 flex items-center justify-center text-white/80 hover:text-white transition-colors"
                aria-label="Share on LinkedIn">
                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24">
                  <path
                    d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144 0-2.063-.926-2.063-2.065 0-1.138.92-2.063 2.063-2.063 1.14 0 2.064.925 2.064 2.063 0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z" />
                </svg>
              </a>
              <a href="#" id="copy-link-btn" (click)="copyLinkToClipboard($event)"
                class="group/copy relative w-8 h-8 flex items-center justify-center text-white/80 hover:text-white transition-colors"
                aria-label="Copy link">
                <label for="copy-link-btn"
                  class="absolute left-1 opacity-0 group-hover/copy:opacity-100 transition-opacity duration-200 pointer-events-none z-10 cursor-pointer"
                  [class.opacity-100]="linkCopied()">
                  @if (linkCopied()) {
                  <svg width="125" height="62" viewBox="0 0 125 62" fill="none" xmlns="http://www.w3.org/2000/svg"
                    class="block">
                    <rect y="18" width="24" height="24" rx="12" fill="#2FE336" fill-opacity="0.16" />
                    <path
                      d="M18.6875 25.3125C19.0938 25.6875 19.0938 26.3438 18.6875 26.7188L10.6875 34.7188C10.3125 35.125 9.65625 35.125 9.28125 34.7188L5.28125 30.7188C4.875 30.3438 4.875 29.6875 5.28125 29.3125C5.65625 28.9062 6.3125 28.9062 6.6875 29.3125L9.96875 32.5938L17.2812 25.3125C17.6562 24.9062 18.3125 24.9062 18.6875 25.3125Z"
                      fill="#2FE336" />
                    <g filter="url(#filter0_copy_link)">
                      <rect x="28" y="17.5" width="82" height="25" rx="7.5" fill="#3D3D3D" />
                      <rect x="28" y="17.5" width="82" height="25" rx="7.5" stroke="#3D3D3D" />
                      <path
                        d="M36.3608 34V25.2727H37.9418V32.6747H41.7855V34H36.3608ZM43.0895 34V27.4545H44.6321V34H43.0895ZM43.8651 26.5256C43.6207 26.5256 43.4105 26.4446 43.2344 26.2827C43.0582 26.1179 42.9702 25.9205 42.9702 25.6903C42.9702 25.4574 43.0582 25.2599 43.2344 25.098C43.4105 24.9332 43.6207 24.8509 43.8651 24.8509C44.1122 24.8509 44.3224 24.9332 44.4957 25.098C44.6719 25.2599 44.7599 25.4574 44.7599 25.6903C44.7599 25.9205 44.6719 26.1179 44.4957 26.2827C44.3224 26.4446 44.1122 26.5256 43.8651 26.5256ZM47.761 30.1648V34H46.2184V27.4545H47.6928V28.5668H47.7695C47.9201 28.2003 48.1602 27.9091 48.4897 27.6932C48.8221 27.4773 49.2326 27.3693 49.7212 27.3693C50.1729 27.3693 50.5664 27.4659 50.9016 27.6591C51.2397 27.8523 51.5011 28.1321 51.6857 28.4986C51.8732 28.8651 51.9656 29.3097 51.9627 29.8324V34H50.4201V30.071C50.4201 29.6335 50.3065 29.2912 50.0792 29.044C49.8548 28.7969 49.5437 28.6733 49.146 28.6733C48.8761 28.6733 48.636 28.733 48.4258 28.8523C48.2184 28.9687 48.055 29.1378 47.9357 29.3594C47.8192 29.581 47.761 29.8494 47.761 30.1648ZM54.9371 31.946L54.9329 30.0838H55.18L57.5323 27.4545H59.3349L56.4414 30.6761H56.1218L54.9371 31.946ZM53.5309 34V25.2727H55.0735V34H53.5309ZM57.6388 34L55.5082 31.0213L56.5479 29.9347L59.484 34H57.6388ZM66.1946 34.1278C65.5412 34.1278 64.9801 33.9844 64.5114 33.6974C64.0455 33.4105 63.6861 33.0142 63.4332 32.5085C63.1832 32 63.0582 31.4148 63.0582 30.7528C63.0582 30.0881 63.1861 29.5014 63.4418 28.9929C63.6974 28.4815 64.0582 28.0838 64.5241 27.7997C64.9929 27.5128 65.5469 27.3693 66.1861 27.3693C66.7173 27.3693 67.1875 27.4673 67.5966 27.6634C68.0085 27.8565 68.3366 28.1307 68.581 28.4858C68.8253 28.8381 68.9645 29.25 68.9986 29.7216H67.5241C67.4645 29.4062 67.3224 29.1435 67.098 28.9332C66.8764 28.7202 66.5795 28.6136 66.2074 28.6136C65.892 28.6136 65.6151 28.6989 65.3764 28.8693C65.1378 29.0369 64.9517 29.2784 64.8182 29.5938C64.6875 29.9091 64.6222 30.2869 64.6222 30.7273C64.6222 31.1733 64.6875 31.5568 64.8182 31.8778C64.9489 32.196 65.1321 32.4418 65.3679 32.6151C65.6065 32.7855 65.8864 32.8707 66.2074 32.8707C66.4347 32.8707 66.6378 32.8281 66.8168 32.7429C66.9986 32.6548 67.1506 32.5284 67.2727 32.3636C67.3949 32.1989 67.4787 31.9986 67.5241 31.7628H68.9986C68.9616 32.2259 68.8253 32.6364 68.5895 32.9943C68.3537 33.3494 68.0327 33.6278 67.6264 33.8295C67.2202 34.0284 66.7429 34.1278 66.1946 34.1278ZM73.1204 34.1278C72.4812 34.1278 71.9272 33.9872 71.4585 33.706C70.9897 33.4247 70.6261 33.0312 70.3675 32.5256C70.1119 32.0199 69.984 31.429 69.984 30.7528C69.984 30.0767 70.1119 29.4844 70.3675 28.9759C70.6261 28.4673 70.9897 28.0724 71.4585 27.7912C71.9272 27.5099 72.4812 27.3693 73.1204 27.3693C73.7596 27.3693 74.3136 27.5099 74.7823 27.7912C75.2511 28.0724 75.6133 28.4673 75.869 28.9759C76.1275 29.4844 76.2567 30.0767 76.2567 30.7528C76.2567 31.429 76.1275 32.0199 75.869 32.5256C75.6133 33.0312 75.2511 33.4247 74.7823 33.706C74.3136 33.9872 73.7596 34.1278 73.1204 34.1278ZM73.1289 32.892C73.4755 32.892 73.7653 32.7969 73.9982 32.6065C74.2312 32.4134 74.4045 32.1548 74.5181 31.831C74.6346 31.5071 74.6928 31.1463 74.6928 30.7486C74.6928 30.348 74.6346 29.9858 74.5181 29.6619C74.4045 29.3352 74.2312 29.0753 73.9982 28.8821C73.7653 28.6889 73.4755 28.5923 73.1289 28.5923C72.7738 28.5923 72.4783 28.6889 72.2425 28.8821C72.0096 29.0753 71.8349 29.3352 71.7184 29.6619C71.6048 29.9858 71.5479 30.348 71.5479 30.7486C71.5479 31.1463 71.6048 31.5071 71.7184 31.831C71.8349 32.1548 72.0096 32.4134 72.2425 32.6065C72.4783 32.7969 72.7738 32.892 73.1289 32.892ZM77.5661 36.4545V27.4545H79.0831V28.5369H79.1726C79.2521 28.3778 79.3643 28.2088 79.5092 28.0298C79.6541 27.848 79.8501 27.6932 80.0973 27.5653C80.3445 27.4347 80.6598 27.3693 81.0433 27.3693C81.549 27.3693 82.005 27.4986 82.4112 27.7571C82.8203 28.0128 83.1442 28.392 83.3828 28.8949C83.6243 29.3949 83.745 30.0085 83.745 30.7358C83.745 31.4545 83.6271 32.0653 83.3913 32.5682C83.1555 33.071 82.8345 33.4545 82.4283 33.7188C82.022 33.983 81.5618 34.1151 81.0476 34.1151C80.6726 34.1151 80.3615 34.0526 80.1143 33.9276C79.8672 33.8026 79.6683 33.652 79.5178 33.4759C79.37 33.2969 79.255 33.1278 79.1726 32.9688H79.1087V36.4545H77.5661ZM79.0788 30.7273C79.0788 31.1506 79.1385 31.5213 79.2578 31.8395C79.38 32.1577 79.5547 32.4062 79.782 32.5852C80.0121 32.7614 80.2905 32.8494 80.6172 32.8494C80.9581 32.8494 81.2436 32.7585 81.4737 32.5767C81.7038 32.392 81.8771 32.1406 81.9936 31.8224C82.1129 31.5014 82.1726 31.1364 82.1726 30.7273C82.1726 30.321 82.1143 29.9602 81.9979 29.6449C81.8814 29.3295 81.7081 29.0824 81.478 28.9034C81.2479 28.7244 80.9609 28.6349 80.6172 28.6349C80.2876 28.6349 80.0078 28.7216 79.7777 28.8949C79.5476 29.0682 79.3729 29.3111 79.2536 29.6236C79.1371 29.9361 79.0788 30.304 79.0788 30.7273ZM85.0661 34V27.4545H86.6087V34H85.0661ZM85.8416 26.5256C85.5973 26.5256 85.3871 26.4446 85.2109 26.2827C85.0348 26.1179 84.9467 25.9205 84.9467 25.6903C84.9467 25.4574 85.0348 25.2599 85.2109 25.098C85.3871 24.9332 85.5973 24.8509 85.8416 24.8509C86.0888 24.8509 86.299 24.9332 86.4723 25.098C86.6484 25.2599 86.7365 25.4574 86.7365 25.6903C86.7365 25.9205 86.6484 26.1179 86.4723 26.2827C86.299 26.4446 86.0888 26.5256 85.8416 26.5256ZM91.0927 34.1278C90.4364 34.1278 89.8697 33.9915 89.3924 33.7188C88.918 33.4432 88.5529 33.054 88.2972 32.5511C88.0415 32.0455 87.9137 31.4503 87.9137 30.7656C87.9137 30.0923 88.0415 29.5014 88.2972 28.9929C88.5558 28.4815 88.9165 28.0838 89.3796 27.7997C89.8427 27.5128 90.3867 27.3693 91.0117 27.3693C91.4151 27.3693 91.7958 27.4347 92.1538 27.5653C92.5146 27.6932 92.8327 27.892 93.1083 28.1619C93.3867 28.4318 93.6055 28.7756 93.7646 29.1932C93.9237 29.608 94.0032 30.1023 94.0032 30.6761V31.1491H88.6381V30.1094H92.5245C92.5217 29.8139 92.4577 29.5511 92.3327 29.321C92.2077 29.0881 92.033 28.9048 91.8086 28.7713C91.587 28.6378 91.3285 28.571 91.033 28.571C90.7177 28.571 90.4407 28.6477 90.2021 28.8011C89.9634 28.9517 89.7773 29.1506 89.6438 29.3977C89.5131 29.642 89.4464 29.9105 89.4435 30.2031V31.1108C89.4435 31.4915 89.5131 31.8182 89.6523 32.0909C89.7915 32.3608 89.9862 32.5682 90.2362 32.7131C90.4862 32.8551 90.7788 32.9261 91.114 32.9261C91.3384 32.9261 91.5415 32.8949 91.7234 32.8324C91.9052 32.767 92.0629 32.6719 92.1964 32.5469C92.3299 32.4219 92.4308 32.267 92.4989 32.0824L93.9393 32.2443C93.8484 32.625 93.6751 32.9574 93.4194 33.2415C93.1665 33.5227 92.8427 33.7415 92.4478 33.8977C92.0529 34.0511 91.6012 34.1278 91.0927 34.1278ZM97.7372 34.1151C97.223 34.1151 96.7628 33.983 96.3565 33.7188C95.9503 33.4545 95.6293 33.071 95.3935 32.5682C95.1577 32.0653 95.0398 31.4545 95.0398 30.7358C95.0398 30.0085 95.1591 29.3949 95.3977 28.8949C95.6392 28.392 95.9645 28.0128 96.3736 27.7571C96.7827 27.4986 97.2386 27.3693 97.7415 27.3693C98.125 27.3693 98.4403 27.4347 98.6875 27.5653C98.9347 27.6932 99.1307 27.848 99.2756 28.0298C99.4205 28.2088 99.5327 28.3778 99.6122 28.5369H99.6761V25.2727H101.223V34H99.706V32.9688H99.6122C99.5327 33.1278 99.4176 33.2969 99.267 33.4759C99.1165 33.652 98.9176 33.8026 98.6705 33.9276C98.4233 34.0526 98.1122 34.1151 97.7372 34.1151ZM98.1676 32.8494C98.4943 32.8494 98.7727 32.7614 99.0028 32.5852C99.233 32.4062 99.4077 32.1577 99.527 31.8395C99.6463 31.5213 99.706 31.1506 99.706 30.7273C99.706 30.304 99.6463 29.9361 99.527 29.6236C99.4105 29.3111 99.2372 29.0682 99.0071 28.8949C98.7798 28.7216 98.5 28.6349 98.1676 28.6349C97.8239 28.6349 97.5369 28.7244 97.3068 28.9034C97.0767 29.0824 96.9034 29.3295 96.7869 29.6449C96.6705 29.9602 96.6122 30.321 96.6122 30.7273C96.6122 31.1364 96.6705 31.5014 96.7869 31.8224C96.9063 32.1406 97.081 32.392 97.3111 32.5767C97.544 32.7585 97.8295 32.8494 98.1676 32.8494Z"
                        fill="white" />
                    </g>
                    <defs>
                      <filter id="filter0_copy_link" x="9.5" y="0" width="119" height="62" filterUnits="userSpaceOnUse"
                        color-interpolation-filters="sRGB">
                        <feFlood flood-opacity="0" result="BackgroundImageFix" />
                        <feColorMatrix in="SourceAlpha" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"
                          result="hardAlpha" />
                        <feOffset dy="1" />
                        <feGaussianBlur stdDeviation="9" />
                        <feColorMatrix type="matrix"
                          values="0 0 0 0 0.00784314 0 0 0 0 0.0392157 0 0 0 0 0.12549 0 0 0 0.04 0" />
                        <feBlend mode="normal" in2="BackgroundImageFix" result="effect1_dropShadow_8015_18159" />
                        <feColorMatrix in="SourceAlpha" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"
                          result="hardAlpha" />
                        <feOffset dy="6" />
                        <feGaussianBlur stdDeviation="5" />
                        <feColorMatrix type="matrix"
                          values="0 0 0 0 0.00784314 0 0 0 0 0.0392157 0 0 0 0 0.12549 0 0 0 0.06 0" />
                        <feBlend mode="normal" in2="effect1_dropShadow_8015_18159"
                          result="effect2_dropShadow_8015_18159" />
                        <feColorMatrix in="SourceAlpha" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"
                          result="hardAlpha" />
                        <feMorphology radius="1" operator="erode" in="SourceAlpha"
                          result="effect3_dropShadow_8015_18159" />
                        <feOffset dy="3" />
                        <feGaussianBlur stdDeviation="2.5" />
                        <feColorMatrix type="matrix"
                          values="0 0 0 0 0.00784314 0 0 0 0 0.0392157 0 0 0 0 0.12549 0 0 0 0.1 0" />
                        <feBlend mode="normal" in2="effect2_dropShadow_8015_18159"
                          result="effect3_dropShadow_8015_18159" />
                        <feBlend mode="normal" in="SourceGraphic" in2="effect3_dropShadow_8015_18159" result="shape" />
                      </filter>
                    </defs>
                  </svg>
                  } @else {
                  <svg width="125" height="62" viewBox="0 0 125 62" fill="none" xmlns="http://www.w3.org/2000/svg"
                    class="block">
                    <rect y="18" width="24" height="24" rx="12" fill="#3D3D3D" fill-opacity="0.16" />
                    <g transform="translate(0, 18)">
                    </g>
                    <g filter="url(#filter0_copy_link_alt)">
                      <rect x="28" y="17.5" width="82" height="25" rx="7.5" fill="#3D3D3D" />
                      <rect x="28" y="17.5" width="82" height="25" rx="7.5" stroke="#3D3D3D" />
                      <text x="69" y="34" text-anchor="middle" fill="white" font-size="12" font-weight="500"
                        font-family="Inter, system-ui, sans-serif">Copy Link</text>
                    </g>
                    <defs>
                      <filter id="filter0_copy_link_alt" x="9.5" y="0" width="119" height="62"
                        filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB">
                        <feFlood flood-opacity="0" result="BackgroundImageFix" />
                        <feColorMatrix in="SourceAlpha" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"
                          result="hardAlpha" />
                        <feOffset dy="1" />
                        <feGaussianBlur stdDeviation="9" />
                        <feColorMatrix type="matrix"
                          values="0 0 0 0 0.00784314 0 0 0 0 0.0392157 0 0 0 0 0.12549 0 0 0 0.04 0" />
                        <feBlend mode="normal" in2="BackgroundImageFix" result="effect1_alt" />
                        <feColorMatrix in="SourceAlpha" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"
                          result="hardAlpha" />
                        <feOffset dy="6" />
                        <feGaussianBlur stdDeviation="5" />
                        <feColorMatrix type="matrix"
                          values="0 0 0 0 0.00784314 0 0 0 0 0.0392157 0 0 0 0 0.12549 0 0 0 0.06 0" />
                        <feBlend mode="normal" in2="effect1_alt" result="effect2_alt" />
                        <feColorMatrix in="SourceAlpha" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"
                          result="hardAlpha" />
                        <feMorphology radius="1" operator="erode" in="SourceAlpha" result="effect3_alt" />
                        <feOffset dy="3" />
                        <feGaussianBlur stdDeviation="2.5" />
                        <feColorMatrix type="matrix"
                          values="0 0 0 0 0.00784314 0 0 0 0 0.0392157 0 0 0 0 0.12549 0 0 0 0.1 0" />
                        <feBlend mode="normal" in2="effect2_alt" result="effect3_alt" />
                        <feBlend mode="normal" in="SourceGraphic" in2="effect3_alt" result="shape" />
                      </filter>
                    </defs>
                  </svg>
                  }
                </label>
                @if (!linkCopied()) {
                <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24">
                  <path
                    d="M20.125 12.375L16.5938 15.9062C14.8125 17.6562 11.9688 17.6562 10.2188 15.9062C8.5625 14.2188 8.46875 11.5625 10 9.78125L10.1562 9.59375C10.4375 9.28125 10.9062 9.25 11.2188 9.53125C11.5312 9.8125 11.5625 10.2812 11.2812 10.5938L11.1562 10.75C10.0938 11.9375 10.1562 13.7188 11.2812 14.8438C12.4375 16 14.3438 16 15.5312 14.8438L19.0625 11.3125C20.2188 10.125 20.2188 8.25 19.0625 7.0625C17.9375 5.96875 16.1562 5.90625 14.9688 6.9375L14.7812 7.09375C14.4688 7.375 14 7.34375 13.7188 7.03125C13.4375 6.71875 13.4688 6.25 13.7812 5.96875L13.9688 5.8125C15.75 4.25 18.4375 4.34375 20.125 6C21.875 7.75 21.875 10.5938 20.125 12.375ZM3.84375 11.6562L7.40625 8.125C9.15625 6.375 12 6.375 13.75 8.125C15.4375 9.78125 15.5312 12.4688 13.9688 14.25L13.7812 14.4375C13.5312 14.75 13.0312 14.8125 12.7188 14.5312C12.4062 14.25 12.375 13.7812 12.6562 13.4688L12.8438 13.2812C13.875 12.0938 13.8125 10.3125 12.6875 9.1875C11.5312 8 9.625 8 8.46875 9.1875L4.90625 12.7188C3.75 13.875 3.75 15.7812 4.90625 16.9688C6.03125 18.0625 7.8125 18.125 9 17.0938L9.1875 16.9375C9.5 16.6562 9.96875 16.6875 10.25 17C10.5312 17.3125 10.5 17.7812 10.1875 18.0625L10 18.2188C8.21875 19.7812 5.53125 19.6875 3.84375 18.0312C2.09375 16.2812 2.09375 13.4062 3.84375 11.6562Z" />
                </svg>
                }

              </a>
            </div>
          </div>
          <!-- Social Share Icons -->
        </div>
      </div>
    </div>
  </section>

  <!-- Main Content Section -->
  <section class="w-full py-8 sm:py-12 md:py-16 lg:py-24 bg-white">
    <div class="px-1 sm:px-6 md:px-8 lg:px-1">
      <div class="px-1 sm:px-6 md:px-8 lg:px-28">
        <div class="flex flex-col lg:grid lg:grid-cols-12 gap-6 sm:gap-8 lg:gap-12">
          <aside class="top-24   lg:col-span-3 pl-0 lg:pl-12 self-start  lg:sticky sm:hidden lg:block">
            <div class="">
              <h2 class="text-base md:text-lg font-semibold uppercase tracking-wider text-gray-700/60 mb-4">Table of
                Contents</h2>
              <nav class="space-y-2">
                @for (item of tableOfContents(); track item.id) {
                <a [href]="'#' + item.id" (click)="$event.preventDefault(); scrollToSection(item.id)"
                  [class]="activeSection() === item.id
                     ? 'block px-3 py-2 text-[1.06rem] text-p-500 bg-p-30 font-semibold transition-colors cursor-pointer'
                     : 'block px-3 py-2 text-[1.06rem] text-gray-700 hover:text-p-500 hover:bg-p-30 transition-colors cursor-pointer'">
                  {{ decodeHtmlEntities(item.text) }}
                </a>
                } @empty {
                <p class="text-sm text-gray-500 px-3 py-2">No sections in this post.</p>
                }
              </nav>
            </div>
          </aside>

          <!-- Right Column: Blog Content -->
          <div class="lg:col-span-9 w-full overflow-x-hidden">
            <!-- Excerpt -->
            <!-- @if (post()!.sanitizedExcerpt) {
            <div class="mb-8 sm:mb-12 p-6 bg-blue-50 border-l-4 border-p-700 rounded-r-lg prose prose-sm max-w-none"
              [innerHTML]="post()!.sanitizedExcerpt">
            </div>
            } @else if (post()!.excerpt) {
            <div class="mb-8 sm:mb-12 p-6 bg-blue-50 border-l-4 border-blue-600 rounded-r-lg">
              <p class="text-lg sm:text-xl text-gray-700 leading-relaxed       ">
                {{ post()!.excerpt }}
              </p>
            </div>
            } -->

            <!-- Main Content -->
            @if (p.sanitizedContent) {
            <div class="html-content text-base sm:text-lg md:text-xl" [innerHTML]="p.sanitizedContent"></div>
            }

            <!-- Author Card -->
            <!-- @if (post()!.authorPerson || post()!.author.node) {
            <div class="mt-12 sm:mt-16 pt-8 sm:pt-12 border-t border-gray-200">
              <div class="flex items-start gap-4 sm:gap-6">
                @if (post()!.authorPerson?.picture) {
                <img [src]="post()!.authorPerson!.picture!" [alt]="authorDisplayName(post()!)"
                  class="w-16 h-16 sm:w-20 sm:h-20      object-cover flex-shrink-0" />
                } @else {
                <div class="w-16 h-16 sm:w-20 sm:h-20 bg-blue-100      flex items-center justify-center flex-shrink-0">
                  <span class="text-blue-600 font-bold text-xl sm:text-2xl">
                    {{ (post()!.authorPerson?.name || post()!.authorPerson?.firstName || post()!.author.node.firstName
                    || 'A').charAt(0) }}
                  </span>
                </div>
                }
                <div>
                  <h3 class="text-lg sm:text-xl font-bold text-gray-900 mb-2">
                    {{ authorDisplayName(post()!) }}
                  </h3>
                  @if (post()!.author.node.email) {
                  <p class="text-sm text-gray-600 mb-2">{{ post()!.author.node.email }}</p>
                  }
                  @if (post()!.authorPerson?.position) {
                  <p class="text-sm text-gray-600 mb-2">{{ post()!.authorPerson?.position }}</p>
                  }
                  <p class="text-sm text-gray-600">
                    Published on {{ post()!.date | date:'MMMM d, y' }}
                  </p>
                </div>
              </div>
            </div>
            } -->

            <!-- Navigation -->
            <!-- <div class="mt-12 sm:mt-16 pt-8 sm:pt-12 border-t border-gray-200">
              <a routerLink="/blog"
                class="inline-flex items-center text-blue-600 hover:text-blue-700        transition-colors duration-200">
                <svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7" />
                </svg>
                Back to All Posts
              </a>
            </div> -->
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Contact Form Section (oculta si Gen Content tiene showContactSection = false) -->

  <section
    class="w-full py-12 sm:py-16 md:py-20 lg:py-24 bg-gradient-to-r from-purple-50 via-blue-50 to-blue-100 overflow-x-hidden">
    <div class="container mx-auto px-1 sm:px-6 md:px-8 lg:px-12">
      <div class="max-w-7xl mx-auto">
        <div class="grid grid-cols-1 lg:grid-cols-2 gap-8 lg:gap-12 items-center">
          <!-- Left Column: Image -->
          <div class="relative w-full h-full    overflow-hidden">
            <img src="https://oakwoodsys.com/wp-content/uploads/2026/02/contactus.png" alt="Team collaboration"
              class="w-full h-full object-cover" />
          </div>


          <!-- Right Column: Form -->
          <div class="order-1 lg:order-2">
            <h2 class="text-2xl sm:text-3xl md:text-4xl lg:text-5xl font-bold text-gray-900 mb-4 sm:mb-6">
              Let's bring your Ideas to life
            </h2>
            <p class="text-base sm:text-lg text-gray-700 mb-8 sm:mb-10 leading-relaxed">
              Get in touch with our team to discuss how we can help transform your business with innovative solutions.
            </p>
            <form class="space-y-6">
              <div>
                <label for="email" class="block text-sm        text-gray-700 mb-2">Your email address</label>
                <input type="email" id="email" name="email"
                  class="w-full px-4 py-3 border border-gray-300    focus:ring-2 focus:ring-blue-600 focus:border-blue-600 outline-none transition-colors"
                  placeholder="your.email@example.com" />
              </div>
              <div>
                <label for="company" class="block text-sm        text-gray-700 mb-2">Your company name</label>
                <input type="text" id="company" name="company"
                  class="w-full px-4 py-3 border border-gray-300    focus:ring-2 focus:ring-blue-600 focus:border-blue-600 outline-none transition-colors"
                  placeholder="Company Name" />
              </div>
              <div>
                <label for="message" class="block text-sm        text-gray-700 mb-2">Your message</label>
                <textarea id="message" name="message" rows="4"
                  class="w-full px-4 py-3 border border-gray-300    focus:ring-2 focus:ring-blue-600 focus:border-blue-600 outline-none transition-colors resize-none"
                  placeholder="Tell us about your project..."></textarea>
              </div>
              <div class="flex items-start">
                <input type="checkbox" id="agree" name="agree"
                  class="mt-1 w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-600" />
                <label for="agree" class="ml-3 text-sm text-gray-700">
                  I agree to receive communications from Oakwood.
                </label>
              </div>
              <button type="submit"
                class="w-full bg-blue-600 hover:bg-blue-700 text-white       px-6 py-3    transition-colors duration-200">
                Send Message
              </button>
            </form>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Related case studies -->
  @if ((p.relatedPosts && p.relatedPosts.length > 0) || (p.relatedBloqs && p.relatedBloqs.length > 0)) {
  <section id="related-resources" class="w-full bg-white py-8 sm:py-12 md:py-16 lg:py-20 overflow-x-hidden"
    aria-labelledby="related-posts">
    <div class="container mx-auto px-1 sm:px-6 md:px-8 lg:px-12">
      <div class="max-w-7xl mx-auto">
        <h2 id="related-posts" class="text-3xl sm:text-4xl md:text-5xl  text-gray-900 mb-4 sm:mb-6">
          Related {{isCaseStudy() ? 'case studies' : 'blogs'}}
        </h2>
        <p class="text-sm sm:text-base md:text-lg text-gray-600 mb-8 sm:mb-10 max-w-3xl font-segoe">
          Our proven track record helps to redefine what's possible, enabling your workforce, ecosystem, and global
          operations.
        </p>
        <div class="grid grid-cols-1 md:grid-cols-2 gap-8 sm:gap-10">
          @for (related of (p.relatedPosts ?? p.relatedBloqs ?? []); track related.id) {
          <app-blog-card [slug]="related.slug" [linkBase]="getRelatedLinkBase()"
            [imageUrl]="related.featuredImage?.node?.sourceUrl ?? ''" [imageAlt]="related.title ?? 'Blog post'"
            [tag]="related.primaryTag ?? null" [readingTimeMinutes]="3" [title]="related.title ?? ''"
            [excerptHtml]="related.sanitizedExcerpt ?? null" [authorDisplayName]="null" [date]="related.date ?? ''" />
          }
        </div>
      </div>
    </div>
  </section>
  }
</article>

} @else {
<!-- Placeholder mientras carga el post (data asíncrona) -->
<article class="min-h-screen" aria-busy="true" aria-label="Loading post">
  <!-- Hero skeleton -->
  <section
    class="relative w-full min-h-[82vh] bg-gradient-to-br from-blue-900 via-blue-800 to-slate-900 flex items-center">
    <div class="absolute inset-0 bg-slate-900/70"></div>
    <div class="relative z-10 px-4 sm:px-6 md:px-8 lg:px-28 py-16 sm:py-20 self-end w-full max-w-4xl">
      <nav class="mb-6 flex items-center gap-2">
        <span class="h-4 w-16 bg-white/30 rounded animate-pulse"></span>
        <span class="text-white/50">/</span>
        <span class="h-4 w-24 bg-white/30 rounded animate-pulse"></span>
        <span class="text-white/50">/</span>
        <span class="h-4 w-48 bg-white/40 rounded animate-pulse"></span>
      </nav>
      <div class="h-12 sm:h-14 w-full max-w-2xl bg-white/30 rounded animate-pulse mb-2"></div>
      <div class="h-12 sm:h-14 w-4/5 max-w-xl bg-white/25 rounded animate-pulse mb-6"></div>
      <div class="flex items-center gap-3">
        <span class="h-6 w-20 bg-white/30 rounded animate-pulse"></span>
        <span class="h-10 w-10 rounded-full bg-white/25 animate-pulse"></span>
        <div class="space-y-2">
          <span class="block h-3 w-24 bg-white/30 rounded animate-pulse"></span>
          <span class="block h-3 w-32 bg-white/25 rounded animate-pulse"></span>
        </div>
      </div>
    </div>
  </section>
  <!-- Content skeleton -->
  <section class="w-full py-12 sm:py-16 md:py-20 lg:py-24 bg-white">
    <div class="px-4 sm:px-6 md:px-8 lg:px-1">
      <div class="px-28">
        <div class="grid grid-cols-1 lg:grid-cols-12 gap-8 lg:gap-12">
          <aside class="lg:col-span-3 pl-12">
            <div class="sticky top-24">
              <div class="h-5 w-36 bg-gray-200 rounded animate-pulse mb-4"></div>
              <nav class="space-y-2">
                @for (i of [1,2,3,4,5]; track i) {
                <div class="h-9 w-full bg-gray-100 rounded animate-pulse"></div>
                }
              </nav>
            </div>
          </aside>
          <div class="lg:col-span-9 space-y-4">
            <div class="h-4 w-full bg-gray-200 rounded animate-pulse"></div>
            <div class="h-4 w-full bg-gray-200 rounded animate-pulse"></div>
            <div class="h-4 w-5/6 bg-gray-200 rounded animate-pulse"></div>
            <div class="h-4 w-full bg-gray-100 rounded animate-pulse"></div>
            <div class="h-4 w-full bg-gray-100 rounded animate-pulse"></div>
            <div class="h-4 w-5/6 bg-gray-100 rounded animate-pulse"></div>
            <div class="h-4 w-full bg-gray-100 rounded animate-pulse pt-4"></div>
            <div class="h-4 w-full bg-gray-100 rounded animate-pulse"></div>
            <div class="h-4 w-3/4 bg-gray-100 rounded animate-pulse"></div>
          </div>
        </div>
      </div>
    </div>
  </section>
</article>
}

<app-cta-section title="Let's move your vision forward"
  description="Connect with a team committed to helping you modernize, innovate, and achieve meaningful results."
  primaryText="Talk to an expert" primaryLink="/contact-us" />