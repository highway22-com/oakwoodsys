@if (error()) {
<section class="w-full min-h-[60vh] flex items-center justify-center">
  <div class="text-center">
    <h1 class="text-2xl font-semibold text-gray-900 mb-2">Offer not found</h1>
    <p class="text-gray-600 mb-6">We could not find the offer you requested.</p>
    <!-- <a routerLink="/structured-engagement" class="text-blue-600 hover:text-blue-700">Back to Structured Engagements</a> -->
  </div>
</section>
}

@if (!error() && content()) {
<app-video-hero
  [loading]="false"
  [hvh70]="true"
  [videoUrls]="heroVideoUrls"
  [title]="content()?.title || ''"
  [description]=" ''"
  [ctaPrimary]="heroCtaPrimary"
  [offerdetails]="offerDetails()"
  [showIndicators]="false">
</app-video-hero>
<section class="w-full bg-white">
  <div class="container mx-auto px-4 py-8 sm:py-10 md:py-12 lg:py-16">
    <div class="flex flex-col lg:grid lg:grid-cols-[280px_1fr] gap-8 lg:gap-18">
      <aside class="hidden sm:block lg:sticky lg:top-24 h-max mb-8 lg:mb-0">
        <p class="font-['Inter'] font-semibold text-[16px] leading-[150%] tracking-[0.05em] uppercase text-[#888888] mb-4">Table of contents</p>
        <nav class="space-y-2">
          <a href="#overview"
            (click)="$event.preventDefault(); scrollToSection('overview')"
            [class.focus-active]="activeSection() === 'overview'"
            [class.text-gray-700]="activeSection() !== 'overview'"
            class="p-3 block w-full font-['Inter'] font-medium text-[16px] leading-[150%] tracking-[0em] text-[#3D3D3D] text-left text-xl hover:text-p-500 transition-colors cursor-pointer">
            Overview
          </a>
          @for (section of content()!.sections; track section.id) {
          @if (section.id !== 'overview') {

              <a [href]="'#' + section.id"
                  (click)="$event.preventDefault(); scrollToSection(section.id)"
                  [class.focus-active]="activeSection() === section.id" [class.text-gray-700]="activeSection() !== section.id"
                  class="p-3 block w-full text-left font-['Inter'] font-medium text-[16px] leading-[150%] tracking-[0em] text-[#3D3D3D] hover:text-p-500 transition-colors cursor-pointer">
                  {{ section.title }}
                </a>
            
      
          }
          }
        </nav>
      </aside>

      <article class="max-w-3xl w-full">
        <section id="overview" class="mb-8">
          <p class="font-['Inter'] font-semibold text-xl sm:text-2xl md:text-3xl leading-[130%] tracking-[-0.01em] text-[#242424] mb-4">Overview</p>
          <p class="font-['Inter'] font-normal text-sm sm:text-base md:text-lg leading-[150%] tracking-[0em] text-[#242424]">{{ content()!.summary }}</p>
        </section>

        @for (section of content()!.sections; track section.id) {
        @if (section.id !== 'overview') {
        <section class="mb-8">
          <h2 [id]="section.id" class="font-['Inter'] font-semibold text-xl sm:text-2xl md:text-3xl leading-[130%] tracking-[-0.01em] text-[#242424] mb-4">{{ section.title }}</h2>
          @if (section.body) {
          <p class="font-['Inter'] font-normal text-sm sm:text-base md:text-lg leading-[150%] tracking-[0em] text-[#242424] mb-4">{{ section.body }}</p>
          }
          @if (section.bullets?.length) {
          <ul class="list-disc pl-5 font-['Inter'] font-normal text-sm sm:text-base md:text-lg leading-[150%] tracking-[0em] text-[#242424] space-y-2 mb-4">
            @for (item of section.bullets; track item) {
            <li>{{ item }}</li>
            }
          </ul>
          }
          @if (section.image) {
          <figure class="rounded-lg overflow-hidden border border-gray-200 bg-gray-50">
            <img [src]="section.image.src" [alt]="section.image.alt" class="w-full h-auto object-cover max-h-60 sm:max-h-96" />
            <!-- @if (section.image.caption) {
            <figcaption class="text-xs text-gray-500 px-4 py-2">{{ section.image.caption }}</figcaption>
            } -->
          </figure>
          }
        </section>
        }
        }
      </article>
    </div>
  </div>
</section>
}

<section class="contact-section-form relative py-8 sm:py-12 md:py-16 lg:py-20" id="form" aria-labelledby="form-title">
  <!-- Background image with opacity -->
  <div class="absolute inset-0 bg-cover bg-center bg-no-repeat opacity-24"
    style="background-image: url('/assets/bg-blue.png');"></div>



  <!-- Content -->
  <div class="relative z-10 container mx-auto px-4 sm:px-6 md:px-8 lg:px-12">
    <div class="flex flex-col lg:grid lg:grid-cols-[550px_1fr] gap-8 lg:gap-16 items-stretch">
      <!-- Columna izquierda: imagen con estadï¿½sticas superpuestas -->
      <div #contactImageContainer [class]="'relative mb-8 lg:mb-0'">
        <img src="/assets/contact-offers.png" alt="Team member ready to help" class="w-full h-auto object-cover max-h-60 sm:max-h-96" />
        <div class="absolute inset-0" style="background: linear-gradient(177.91deg, rgba(0, 0, 0, 0) 57.37%, rgba(0, 0, 0, 0.8) 101.86%);"></div>
        <div class="absolute bottom-0 left-0 right-0 p-4 sm:p-6 text-white z-10">
          <h3 class="font-inter font-normal text-2xl sm:text-3xl md:text-4xl leading-[120%] tracking-[-0.42px] mb-2">Pricing</h3>
          <p class="font-segoe text-sm sm:text-base md:text-lg font-normal leading-[150%] opacity-90 max-w-[420px]">
            This engagement may be eligible for Microsoft funding depending on your profile.
          </p>
        </div>
      </div>
      <!-- Columna derecha: formulario -->
      <div class="p-4 sm:p-6 md:p-8 overflow-y-auto">
        <h2 id="form-title" class="font-inter text-black text-2xl sm:text-3xl md:text-4xl font-normal leading-[130%] tracking-[-1.28px] mb-3">
         Contact us to get started
        </h2>
        <p class="font-segoe text-[#3D3D3D] text-sm sm:text-base md:text-lg font-normal leading-[150%] mb-8">
        Custom pricing based on scope and number of SQL workloads in scope.
        </p>
        <form #contactForm (ngSubmit)="onSubmit()" class="flex flex-col gap-4 sm:gap-6">
          <label [class]="'flex flex-col gap-2' + (showFormAnimation() ? ' animate-fade-up' : '')">
            <span class="text-black text-sm sm:text-base font-normal leading-[24px]">Name</span>
            <input type="text" [(ngModel)]="formModel().fullName" name="fullName"
              [class]="'border px-4 py-2 rounded text-sm text-gray-700 placeholder-gray-400 bg-white transition-all duration-200 outline-none ' + (submitted() && validationErrors()['fullName'] ? 'border-red-500 hover:border-red-600 focus:border-red-600' : 'border-gray-100 hover:border-gray-200 focus:border-gray-200')"
              placeholder="Your name" />
            @if (submitted() && validationErrors()['fullName']) {
            <span class="text-xs text-red-500">Full name is required</span>
            }
          </label>
          <div
            [class]="'flex flex-col sm:grid sm:grid-cols-2 gap-4' + (showFormAnimation() ? ' animate-fade-up [animation-delay:80ms]' : '')">
            <label class="flex flex-col gap-2">
              <span class="text-black text-sm sm:text-base font-normal leading-[24px]">Work email address</span>
              <input type="email" [(ngModel)]="formModel().email" name="email"
                [class]="'border px-4 py-2 rounded text-sm text-gray-700 placeholder-gray-400 bg-white transition-all duration-200 outline-none ' + (submitted() && validationErrors()['email'] ? 'border-red-500 hover:border-red-600 focus:border-red-600' : 'border-gray-100 hover:border-gray-200 focus:border-gray-200')"
                placeholder="email@example.com" />
              @if (submitted() && validationErrors()['email']) {
              <span class="text-xs text-red-500">Email is required</span>
              }
            </label>
          </div>
          <label
            [class]="'flex flex-col gap-2' + (showFormAnimation() ? ' animate-fade-up [animation-delay:160ms]' : '')">
            <span class="text-black text-sm sm:text-base font-normal leading-[24px]">Message</span>
            <textarea [(ngModel)]="formModel().message" name="message" rows="4"
              [class]="'border px-4 py-2 rounded text-sm text-gray-700 placeholder-gray-400 bg-white transition-all duration-200 outline-none resize-none ' + (submitted() && validationErrors()['message'] ? 'border-red-500 hover:border-red-600 focus:border-red-600' : 'border-gray-100 hover:border-gray-200 focus:border-gray-200')"
              placeholder="Describe what you need help with or what you're planning next"></textarea>
            @if (submitted() && validationErrors()['message']) {
            <span class="text-xs text-red-500">Message is required</span>
            }
          </label>
          <!-- <div class="recaptcha-container"> -->
          <!-- Replace with your Site Key from https://www.google.com/recaptcha/admin -->
          <!-- <div class="g-recaptcha" data-sitekey="6LeNtGQsAAAAAAhMRd3_mtjfoNCKgOUr4bWi8Dmt" data-callback="onRecaptchaSuccess"></div>
          </div> -->
          <button type="submit" [disabled]="isSubmitting()"
            [class]="'w-full mt-4 sm:mt-6 px-6 py-3 text-white text-sm font-semibold bg-[#0D53A2] rounded hover:bg-blue-700 active:bg-blue-800 transition-all duration-200 cursor-pointer disabled:opacity-50 disabled:cursor-not-allowed'">
            {{ isSubmitting() ? 'Sending...' : 'Send Message' }}
          </button>
        </form>
      </div>
    </div>
  </div>

</section>

<!-- Featured Case Study Section -->
@if (getSlugsForFeaturedSection().length) {
<app-featured-case-study [featuredCategory]="FeaturedCaseStudyCategory.CaseStudyServices" [slugsFeaturedCaseStudies]="getSlugsForFeaturedSection()" />
}

<section #licensingSection class="mb-12 sm:mb-12 md:mb-16 lg:mb-20">
  <div class="container mx-auto px-4 sm:px-6 md:px-8 lg:px-12">
    <div class="flex flex-col items-stretch">
      <div
        [class]="'col-span-2 py-8 sm:py-12 md:py-16 lg:py-24 bg-gradient-to-br from-indigo-50 via-white to-rose-100 text-center'">


        <h2
          [class]="'font-inter font-normal text-2xl sm:text-3xl md:text-4xl leading-tight text-s-900 mb-4'">
          Need Microsoft licensing help?
        </h2>
        <p
          [class]="'font-segoe font-normal text-sm sm:text-base md:text-lg text-black leading-[1.5] tracking-normal text-s-600 max-w-2xl mx-auto mb-8'">
          As a Tier-1 CSP, Oakwood can simplify, manage, and support your M365 and Azure licensing.
        </p>
        <a routerLink="/contact-us" fragment="form"
          [class]="'inline-block px-6 py-3 font-inter font-semibold text-sm sm:text-base md:text-lg leading-[1] tracking-[0] text-white bg-[#0D53A2] hover:opacity-90 transition'">
          Speak to a licensing expert
        </a>
      </div>
    </div>

  </div>
</section>
